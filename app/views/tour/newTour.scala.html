@(towns: List[Town],locations: List[Location], townForm: Form[String])(implicit request: RequestHeader)

@implicitFieldConstructor = @{ FieldConstructor(_formhelpers.f) }

@import helper._

@title = {
 Plan a new tour
 }
 @main(title,nav="newtour") {
 <link rel="stylesheet" media="screen" href="@routes.Assets.at("css/jquery.timepicker.css")">
 <link rel="stylesheet" media="screen" href="@routes.Assets.at("css/bootstrap-datepicker.css")">
 <script src="@routes.Assets.at("js/jquery.timepicker.min.js")" type="text/javascript"></script>
 <script src="@routes.Assets.at("js/bootstrap-datepicker.js")" type="text/javascript"></script>

 <script>
   $(document).ready(function() {
     $('#arr_timepicker').timepicker();
     $('#dep_timepicker').timepicker();
     $('.datepicker').datepicker();

     $("#createForm").submit(function (){
       $('#date').val(new Date($('#date').val()));
       $('#dep_timepicker').val($('#date').val());
     });
   });
 </script>
  <h2>Hello @request.session.get("firstname"), </h2>
  <h2 id="header">where should your taxi bring you to?</h2>
      <script src="@routes.Assets.at("js/newTourHelper.js")" type="text/javascript"></script>
        <form name="tourForm">
  <div class="number_container"> 
       1.departure town
	<div class="bar_active bar_left" id="rect_1" style="border-radius:3px">
</div>
  <select  name="dep_town" size="7" class="number-container_select" onclick="findDepLocations(document.tourForm.dep_town.value);">
        @towns.map { town =>
        @if(!town.name.equals("Berlin")){
            <option value="@town.id">
                @town.name
            </option>
            }else{
            <option value="@town.id" selected="selected">
                @town.name
            </option>
            }
        }
    </select>
    </div>
    <div class="number_container"> 
       2. departure location
	<div class="bar_active" id="rect_2">
</div>
  <select  name="dep_location" size="7" class="number-container_select" id="dep_location" onchange="setDepReady(document.tourForm.dep_location.value);">
        @locations.map { location =>
        @if(!location.name.equals("Carmeq Berlin")){
            <option value="@location.id">
                @location.name
            </option>
            }else{
            <option value="@location.id" selected="selected">
                @location.name
            </option>
            }
        }
    </select>
  </div>
     <div class="number_container"> 
       3. arrival location
   <div class="bar_deactive bar_right" id="rect_3">
</div>
  <select  name="arr_location" size="7" class="number-container_select" id="arr_location" onclick="setArrReady(document.tourForm.dep_location.value,document.tourForm.arr_location.value);">
        @locations.map { location =>
        @if(!location.name.equals("Carmeq Berlin")){
            <option value="@location.id">
                @location.name
            </option>
            }else{
            <option value="@location.id" selected="selected">
                @location.name
            </option>
            }
        }
    </select>
  </div>
    </form>
    <div class="tour_container" id="tour_container"> 
    <table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered"  id="tourlist">
  <caption>
  </caption>
  <thead>
    <tr>
      <th>From</th>
      <th>To</th>
      <th>Departure time</th>
      <th>Arrival time</th>
      <th>Meeting point</th>
      <th>Comment</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
    
    </tr>
  </tbody>
</table>
<div class="offset4 span2">
  <a class="btn btn-info" data-toggle="modal" href="#deleteModal" >Add tour</a>
</div>

<form name="createForm" id="createForm" class="form-horizontal" action="/newTour" method="POST">
<div class="modal hide" id="deleteModal">

  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal">Ã—</button>
    <h3>Create new tour</h3>
  </div>

  <div class="modal-body">
    <fieldset>
      <div class="control-group">
        <label class="control-label" for="dep_location">From</label>
        <div class="controls">
          <select name="dep_location" id="dep_location">
            @locations.map { l =>
            <option value="@l.id">@l.name</option>
            }
          </select>
          <span class="help-inline"></span>
        </div>
      </div>
      <div class="control-group">
        <label class="control-label" for="arr_location">To</label>
        <div class="controls">
          <select name="arr_location" id="arr_location">
            @locations.map { l =>
            <option value="@l.id">@l.name</option>
            }
          </select>
          <span class="help-inline"></span>
        </div>
      </div>
      <div class="control-group">
        <label class="control-label" for="date">Date</label>
        <div class="controls">
          <input type="text" id="date" class="datepicker" name="date" value/>
          <span class="help-inline"></span>
        </div>
      </div>
      <div class="control-group">
        <label class="control-label" for="dep_timepicker">Departure time</label>
        <div class="controls">
          <input type="text" id="dep_timepicker" name="departure" />
          <span class="help-inline"></span>
        </div>
      </div>
      <div class="control-group">
        <label class="control-label" for="arr_timepicker">Arrival time</label>
        <div class="controls">
          <input type="text" id="arr_timepicker" name="arrival"/>
          <span class="help-inline"></span>
        </div>
      </div>
      <div class="control-group">
        <label class="control-label" for="meetingpoint">Meeting point</label>
        <div class="controls">
          <input type="text" id="meetingpoint" name="meetingpoint" >
          <span class="help-inline"></span>
        </div>
      </div>
      <div class="control-group">
        <label class="control-label" for="comment">Comment</label>
        <div class="controls">
          <textarea id="comment" name="comment" rows="2"></textarea>
          <span class="help-inline"></span>
        </div>
      </div>
      <div class="control-group">
        <label class="control-label" for="authentication">Authentication</label>
        <div class="controls">
          <input type="text" id="authentication" name="authentication" />
          <span class="help-inline"></span>
        </div>
      </div>

    </fieldset>

    <div><span style="color:red;">*</span>Legal mumbo jumbo... By hitting 'create tour' you agree .. yadda yadda yadda</div>

  </div>
  <div class="modal-footer">
    <a href="#" class="btn" data-dismiss="modal">Close</a>
    <button type="submit" href="#" class="btn btn-primary" name="submit" id="submit">Create tour</button>
  </div>
</div>
</form> 
    </div>
  </form>
</div>

}

